<!doctype html>
<!-- Conditional comment for mobile ie7 http://blogs.msdn.com/b/iemobile/ -->
<!-- Appcache Facts http://appcachefacts.info/ -->
<!--[if IEMobile 7 ]>    <html class="no-js iem7" manifest="default.appcache?v=1"> <![endif]-->
<!--[if (gt IEMobile 7)|!(IEMobile)]><!--> <html class="no-js"> <!--<![endif]-->

<head>
  <meta charset="utf-8">

  <title>Depression Graph</title>
  <meta name="description" content="Depression Graph: A personal record of major depression inventories. Track, share, get better.">
  <meta name="author" content="Allan Haggett">
  
  <!-- Mobile viewport optimization http://goo.gl/b9SaQ -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Home screen icon  Mathias Bynens http://goo.gl/6nVq0 -->
  <!-- For iPhone 4 with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/h/apple-touch-icon.png">
  <!-- For first-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/m/apple-touch-icon.png">
  <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="img/l/apple-touch-icon-precomposed.png">
  <!-- For nokia devices: -->
  <link rel="shortcut icon" href="img/l/apple-touch-icon.png">

  <!--iOS web app, deletable if not needed -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-startup-image" href="img/l/splash.png">
  
  <!-- Mobile IE allows us to activate ClearType technology for smoothing fonts for easy reading -->
  <meta http-equiv="cleartype" content="on">
	
	<!-- more tags for your 'head' to consider https://gist.github.com/849231 -->
  
  <!-- Main Stylesheet -->
  <link rel="stylesheet" href="css/style.css?v=1">
 
  <!-- All JavaScript at the bottom, except for Modernizr which enables HTML5 elements & feature detects -->
  <script src="js/libs/modernizr-custom.js"></script>
</head>

<body>
	<div id="top" class="navigation-bar black">
		<h1>Depression Graph</h1>
	</div>
  <div id="container">

    <div id="main" role="main">
    	{% if reminder %}
		<p>You have a reminder set for {{ reminder.0.date|date:"F j" }} <a href="/reminders?action=delete&key={{ reminder.0.key }}" class="delete-reminder">x</a>.</p>
		{% endif %}

		<p id="take"><a href="/take">Log an Inventory</a></p>
		
		{% if graph %}
		<div class="grapher">
		<script type="text/javascript" src="http://www.google.com/jsapi"></script>
	    <script type="text/javascript">
	      google.load('visualization', '1', { packages: ['corechart'] });
	    </script>
	    <script type="text/javascript">
	      function drawVisualization() {
	        // Create and populate the data table.
	        var data = new google.visualization.DataTable();
	        data.addColumn('string', 'x');
	        data.addColumn('number', 'Score');
	        
	        {% for point in graph %}
	        data.addRow(["{{ point.0 }}", {{ point.1 }}]);
	        {% endfor %}
	        
	        // Create and draw the visualization.
	        new google.visualization.LineChart(document.getElementById('visualization')).
	            draw(data, {curveType: "function",
	                        width: 290, height: 240,
	                        chartArea: {left: 20, top: 15, width: '90%', height: '90%;'},
	                        vAxis: {maxValue: '50'},
	                        legend: {position: 'none'},
	                        animation:{duration: 1000,easing: 'out'}
	                        }
	                );
	      }
	      
	
	      google.setOnLoadCallback(drawVisualization);
	    </script>
			
		<div id="visualization" style="width: 290px; height: 240px;"></div>

		</div> <!-- /.grapher -->
		
		<ul id="library">

		{% for row in table %}

			<li>
			<a href="/inventory?iid={{ row.2 }}">{{ row.0 }}</a> 
			<span><a href="/inventory?iid={{ row.2 }}">{{ row.1 }}</a></span>
			<a class="delete-inventory" href="/inventory?action=delete&iid={{ row.2 }}">x</a>
			</li>

		{% endfor %}
		</table>
		{% else %}
		<p>No inventories yet.</p>
		{% endif %}
		
		
		

		
		
    </div>
<!--     http://en.wikipedia.org/wiki/Major_Depression_Inventory -->
    <p><a id="more" href="/info">More Information</a></p>
    <footer>
    	<p>Signed in as: {{ userreg }}.</p>
		<p id="logout"><a href="{{ url }}">{{ url_linktext }}</a></p>
    </footer>
  </div> <!--! end of #container -->


  <!-- JavaScript at the bottom for fast page loading -->

  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
  <script>
  	$(document).ready(function(){
  		$('a').click(function() {	 
  			window.location.href = $(this).attr('href'); 
			return false; 
		});
  	});
  </script>
  <script>window.jQuery || document.write("<script src='js/libs/jquery-1.5.1.min.js'>\x3C/script>")</script>
  
  <!-- scripts concatenated and minified via ant build script -->
  <script src="js/mylibs/helper.js"></script>
  <!-- end concatenated and minified scripts-->
  
  <script>
    // iPhone Scale Bug Fix, read this when using http://www.blog.highub.com/mobile-2/a-fix-for-iphone-viewport-scale-bug/
    MBP.scaleFix();
    
    // Media Queries Polyfill https://github.com/shichuan/mobile-html5-boilerplate/wiki/Media-Queries-Polyfill
    yepnope({
      test : Modernizr.mq('(min-width)'),
      nope : ['js/libs/respond.min.js']
    });
  </script>
  
  <!-- Debugger - remove for production -->
  <!-- <script src="https://getfirebug.com/firebug-lite.js"></script> -->
  
  <!-- mathiasbynens.be/notes/async-analytics-snippet Change UA-XXXXX-X to be your site's ID -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23662637-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>